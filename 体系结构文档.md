
<!-- TOC -->

- [酒店预定系统软件体系结构描述文档](#酒店预定系统软件体系结构描述文档)
    - [文档修改历史](#文档修改历史)
    - [1. 引言](#1-引言)
        - [1.1 编制目的](#11-编制目的)
        - [1.2 词汇表](#12-词汇表)
        - [1.3 参考资料](#13-参考资料)
    - [2. 产品概述](#2-产品概述)
    - [3. 逻辑视图](#3-逻辑视图)
    - [4. 组合视图](#4-组合视图)
        - [4.1 开发包图](#41-开发包图)
            - [4.1.1 client server](#411-client-server)
            - [4.1.2 server](#412-server)
        - [4.2 运行时进程](#42-运行时进程)
        - [4.3 物理部署](#43-物理部署)
    - [5. 架构设计](#5-架构设计)
        - [5.1 模块职责](#51-模块职责)
        - [5.2 用户界面层分解](#52-用户界面层分解)
            - [5.2.1 职责](#521-职责)
            - [5.2.2 接口规范](#522-接口规范)
        - [5.3 业务逻辑层分解](#53-业务逻辑层分解)
            - [5.3.1 职责](#531-职责)
            - [5.3.2 接口规范](#532-接口规范)
        - [5.4 数据层分解](#54-数据层分解)
            - [5.4.1 职责](#541-职责)
            - [5.4.2 接口规范](#542-接口规范)
    - [6 信息视角](#6-信息视角)
        - [6.1 持久化对象](#61-持久化对象)
            - [User实体定义](#user实体定义)
            - [Coupon实体定义](#coupon实体定义)
            - [HotelPo实体定义](#hotelpo实体定义)
            - [HotelRoom实体定义](#hotelroom实体定义)
            - [Order实体定义](#order实体定义)
            - [Credit实体定义](#credit实体定义)
            - [Evaluation实体定义](#evaluation实体定义)
            - [OneRoom实体定义](#oneroom实体定义)
        - [6.2 数据库表](#62-数据库表)

<!-- /TOC -->
# 酒店预定系统软件体系结构描述文档

## 文档修改历史

| 修改人员 | 日期 | 修改原因 | 版本号 |
| :------: | ---- | -------- | ------ |
|    王照欣      |  2020/06/03    | 创建酒店预定系统软件体系结构描述文档        | v1.0.0        |
|       梅凯   |    2020/06/15  |      完成业务逻辑层以及数据层的部分    |    v1.0.1    |
|       乔涤生   |    2020/06/17  |      完成逻辑视图的部分    |    v1.0.2    |
|       乔涤生   |    2020/06/17  |      添加了业务逻辑层SalesmanService,EvaluationService模块的接口    |    v1.0.3    |
|       潘易辰   |    2020/06/17  |      完成职责和用户界面层的部分    |    v1.0.4    |
|       梅凯   |    2020/06/20  |      添加了业务逻辑层OneRoomService模块的接口    |    v1.0.5    |
|       梅凯   |    2020/06/22  |      修改了业务逻辑层HotelService数据层HotelMapper的接口    |    v1.0.6    |
|       潘易辰   |    2020/06/25  |      修改了用户界面层的界面跳转    |    v1.0.6    |
|       王照欣   |    2020/06/26  |      添加了业务逻辑层和数据层HotelService的搜索酒店接口    |    v1.0.7    |
|       梅凯   |    2020/06/27  |      修改了业务逻辑层RoomService的接口    |    v1.0.8   |
|       梅凯   |    2020/06/29  |      最终完善酒店预定系统软件体系结构描述文档并发布    |    v1.1.0    |






## 1. 引言

### 1.1 编制目的
本文档详细完成对NJU酒店预定系统的摘要设计，到达指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。
本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。


### 1.2 词汇表

| 词汇名称 | 词汇含义 | 备注 |
| :------: | -------- | ---- |
|    bl      |    business logic      | 业务逻辑     |
| blImpl | business logic implement | 业务逻辑实现 |
| vo | value object | 数值对象 |
| po | persistent object | 持久化对象 |




### 1.3 参考资料
《软件工程与计算：软件开发的技术基础》


## 2. 产品概述
NJU酒店预定系统是为预定酒店的用户开发的业务系统，开发目的是帮助有需求的消费者线上预定酒店，
包括浏览酒店信息，编辑订单信息。通过连锁酒店管理系统的应用，期望为酒店预定用户提高订房效率，降低时间成本。

## 3. 逻辑视图

NJU酒店预定系统中，选择了分层体系结构风格，将系统分为3层（展示层、业务逻辑层、数据层）能够很好地示意整个高层抽象。
展示层包含GUI页面的实现，业务逻辑层包含业务逻辑处理的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑视角和逻辑设计方案如
图1和图2所示。

  ![](https://orzorzorzorz.oss-cn-beijing.aliyuncs.com/%E8%BD%AF%E5%B7%A5%E4%BA%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E6%96%87%E6%A1%A3%E4%BD%9C%E4%B8%9A/%E9%80%BB%E8%BE%91%E8%A7%86%E5%9B%BE/%E5%9B%BE1%E5%8F%82%E7%85%A7%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E9%A3%8E%E6%A0%BC%E7%9A%84%E5%8C%85%E5%9B%BE%E8%A1%A8%E8%BE%BE%E9%80%BB%E8%BE%91%E8%A7%86%E8%A7%92.png)
  <div style="text-align: center;">图1 参照体系结构风格的包图表达逻辑视角</div>

  ![](https://orzorzorzorz.oss-cn-beijing.aliyuncs.com/%E8%BD%AF%E5%B7%A5%E4%BA%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E6%96%87%E6%A1%A3%E4%BD%9C%E4%B8%9A/%E9%80%BB%E8%BE%91%E8%A7%86%E5%9B%BE/%E9%80%BB%E8%BE%91%E8%A7%86%E5%9B%BE.png)
  <div style="text-align: center;">图2 软件体系结构逻辑设计方案</div>

## 4. 组合视图

### 4.1 开发包图

| 开发包 | 依赖的其他开发包               |
| :----: | ------------------------------ |
| mainui | adminui,hotelui,vo,userui,po,hotelmanagerui,salesmanui|
| userui |   accountcontroller                        |
| userbl | po,vo                        |
| userblimpl |         userbl,userdata,creditbl,vo,po,springframework,dataimpl                      |
|usercontroller  |     userbl,po,vo,springframework                           |
| userdata |                 po,ibatis,springframework               |
| hotelmanagerui |     hotelmanagercontroller                          |
| couponbl |   po,vo                              |
| couponblimpl |  couponbl,coupondata,po, springframework ,dataimpl                               |
| couponcontroller |          couponbl,vo,springframework                         |
| coupondata |         po,ibatis,springframework                       |
| hotelui |   hotelcontroller                        |
|  hotelbl|   util,vo                              |
| hotelblimpl |       hotelbl，evaluationbl,orderbl,userbl,hoteldata,enums,po,util,vo,springframework ,dataimpl                        |
| hotelcontroller |     hotelbl,po,util,vo,springframework                              |
|  hoteldata|       po,vo,ibatis,springframework                        |
| adminui |  admincontroller                     |
|  adminbl| po,vo                              |
|  adminblimpl|     adminbl,admindata,po,vo, springframework ,dataimpl                        |
|  admincontroller|      adminbl,vo,springframework                              |
|  admindata|       po,ibatis,springframework                         |
|  orderui|   ordercontroller                     |
|  orderbl|            po,vo                      |
|  orderblimpl|   orderbl,creditbl,oneroombl,userbl,orderdata,po,vo,springframework,dataimpl,time,util                          |
|  ordercontroller|      orderbl,vo,springframework                      |
|  orderdata|     po,ibatis,springframework                           |
|  salesmanui|   salesmancontroller                     |
|  salesmanbl|            po,vo                      |
|  salesmanblimpl|            creditbl,salesmanbl,salesmandata,userdata,po,vo,springframework                      |
|  salesmancontroller|      salesmanbl,vo,springframework                      |
|  salesmandata|     po,ibatis,springframework                           |
|  creditbl|            po,vo                      |
|  creditblimpl|            po,vo                      |
|  creditcontroller|      creditbl,creditdata,userdata,po,vo,springframework                      |
|  creditdata|     po,ibatis,springframework                           |
|  evaluationbl|            po,vo                      |
|  evaluationimpl|            evaluationbl,evaluationdata,hoteldata,po,vo,springframework                      |
|  evaluationcontroller|      evaluationbl,vo,springframework                      |
|  evaluationdata|     po,ibatis,springframework                           |
|  oneroombl|            po,vo                      |
|  oneroomimpl|            po,vo                      |
|  oneroomcontroller|      oneroombl,hoteldata,orderdata,po,vo,springframework                      |
|  oneroomdata|     po,ibatis,springframework                           |
|  vo|                                |
|  po|                                |

#### 4.1.1 client server  
![](https://orzorzorzorz.oss-cn-beijing.aliyuncs.com/%E8%BD%AF%E5%B7%A5%E4%BA%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E6%96%87%E6%A1%A3%E4%BD%9C%E4%B8%9A/%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%BB%84%E5%90%88%E8%A7%86%E5%9B%BE/client%20server.png)
#### 4.1.2 server

![](https://orzorzorzorz.oss-cn-beijing.aliyuncs.com/%E8%BD%AF%E5%B7%A5%E4%BA%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E6%96%87%E6%A1%A3%E4%BD%9C%E4%B8%9A/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%BB%84%E5%90%88%E8%A7%86%E5%9B%BE/server.png)


### 4.2 运行时进程
多个客户端并行，服务端在机器上进行并进行相关处理
![](https://orzorzorzorz.oss-cn-beijing.aliyuncs.com/%E8%BD%AF%E5%B7%A5%E4%BA%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E6%96%87%E6%A1%A3%E4%BD%9C%E4%B8%9A/%E8%BF%9B%E7%A8%8B%E5%9B%BE/%E8%BF%9B%E7%A8%8B%E5%9B%BE.png)




### 4.3 物理部署

客户端构建放在客户端机器上，服务器端构建放在服务端机器上
![](https://orzorzorzorz.oss-cn-beijing.aliyuncs.com/%E8%BD%AF%E5%B7%A5%E4%BA%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E6%96%87%E6%A1%A3%E4%BD%9C%E4%B8%9A/%E9%83%A8%E7%BD%B2%E5%9B%BE/%E9%83%A8%E7%BD%B2%E5%9B%BE.png)

## 5. 架构设计

- 描述功能分解和如何在不同的层中安排软件模块
  - 描述架构中的对象，包含架构图
  - 描述组件接口信息
    - 包括：语法、前置条件、后置条件

### 5.1 模块职责

- 模块视图  
  - 客户端模块视图
![icon](https://orzorzorzorz.oss-cn-beijing.aliyuncs.com/%E8%BD%AF%E5%B7%A5%E4%BA%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E6%96%87%E6%A1%A3%E4%BD%9C%E4%B8%9A/%E6%A8%A1%E5%9D%97%E8%81%8C%E8%B4%A3/%E6%A8%A1%E5%9D%971.png)
  -  服务器端模块试图
![icon](https://orzorzorzorz.oss-cn-beijing.aliyuncs.com/%E8%BD%AF%E5%B7%A5%E4%BA%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E6%96%87%E6%A1%A3%E4%BD%9C%E4%B8%9A/%E6%A8%A1%E5%9D%97%E8%81%8C%E8%B4%A3/%E6%A8%A1%E5%9D%972.png)  


- 各层职责  
    - 客户端各层职责
      
        |     层     | 职责     |
        | :--------: | -------- |
        | 启动模块 | 负责人初始化网络通信机制，启动用户界面 |
        | 用户界面层 | 展示界面 |
        | 业务逻辑层 | 对于用户界面的输入进行响应并进行业务处理逻辑 |
        | 客户端网络模块 | 进行网络数据传输 |

    - 服务器端各层职责
    
        |     层     | 职责     |
        | :--------: | -------- |
        | 启动模块 | 负责人初始化网络通信机制，启动用户界面 |
        | 数据层 | 负责数据的持久化及数据访问接口 |
        | 服务器端网络模块 | 进行网络数据传输 |


- 层之间调用接口

|     接口     | 服务调用方    |服务提供方|
| :--------: | -------- |------|
|HotelBLService<br>LoginBLService<br>MemberService<br>PromotionBLService<br>  | 客户端展示层 | 客户端业务逻辑层 |
|SalesDataService<br>UserDataService<br>MemberDataService<br>HotelDataService<br>PromotionDataService<br>DatabaseFactory  | 客户端业务逻辑层 | 服务器端数据层 |



### 5.2 用户界面层分解
根据要求，系统存在14个用户界面：登录界面、修改个人信息界面、管理员主界面、酒店工作人员主界面、客户主界面、网站营销人员主界面、录入酒店和房间界面、管理订单界面界面、
浏览酒店信息界面、预定酒店界面、查看订单界面、查看信用界面、管理人员界面。界面跳转如图所示。

![icon](https://orzorzorzorz.oss-cn-beijing.aliyuncs.com/%E8%BD%AF%E5%B7%A5%E4%BA%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E6%96%87%E6%A1%A3%E4%BD%9C%E4%B8%9A/%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2/%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2%E5%B1%82.png)

#### 5.2.1 职责

用户界面模块的职责如下表所示。

|         模块        | 职责                   |
| :--------------------: | ---------------------- |
| MainFrame | 界面Frame，负责界面的显示和界面的跳转 |

- 类图
![icon](https://orzorzorzorz.oss-cn-beijing.aliyuncs.com/%E8%BD%AF%E5%B7%A5%E4%BA%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E6%96%87%E6%A1%A3%E4%BD%9C%E4%B8%9A/%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2/%E7%B1%BB%E5%9B%BE.png)

- 接口规范
用户界面模块的接口规范如下表所示。

| 接口名 | 语法         |init(args:String[])|
| ------ | :----------- |------------|
| MainFrame       | **前置条件** |无|
| |**后置条件** |显示Frame以及LoginPanel|


- 需要的服务接口
用户界面层需要的服务接口如下表所示。

|         服务名         | 服务                   |
| :--------------------: | ---------------------- |
| blservice.loginservice | 登录界面的业务逻辑接口 |
| blservice.*BLservice | 每个界面都有一个相应的业务逻辑接口 |


#### 5.2.2 接口规范

| 接口名 | 语法         |
| ------ | :----------- |
|        | **前置条件** |
|        | **后置条件** |

### 5.3 业务逻辑层分解
业务逻辑层包括多个针对界面的业务逻辑处理对象，业务逻辑层的设计图如下：
![icon](https://orzorzorzorz.oss-cn-beijing.aliyuncs.com/%E8%BD%AF%E5%B7%A5%E4%BA%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E6%96%87%E6%A1%A3%E4%BD%9C%E4%B8%9A/%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%B1%82/%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E8%AE%BE%E8%AE%A1%E5%9B%BE.png)
#### 5.3.1 职责
业务逻辑层模块的职责如下表所示
<table style="text-align: center;line-height: 30px;">
  <tr>
      <td>模块</td>
      <td>职责</td>
  </tr>
  <tr>
      <td>SalesmanService</td>
      <td>负责实现网站营销人员对应界面所需要的服务</td>
  </tr>
  <tr>
      <td>AdminService</td>
      <td>负责实现网站管理员对应界面所需要的服务</td>
  </tr>
  <tr>
      <td>CouponService</td>
      <td>负责实现优惠政策界面所需要的服务</td>
  </tr>
  <tr>
      <td>HotelService</td>
      <td>负责实现酒店界面所需要的服务</td>
  </tr>
  <tr>
      <td>RoomService</td>
      <td>负责实现总房间界面所需要的服务</td>
  </tr>
  <tr>
      <td>OrderService</td>
      <td>负责实现订单界面所需要的服务</td>
  </tr>
  <tr>
      <td>UserService</td>
      <td>负责实现用户对应界面所需要的服务</td>
  </tr>
  <tr>
      <td>CreditService</td>
      <td>负责实现信用对应界面所需要的服务</td>
  </tr>
  <tr>
      <td>EvaluationService</td>
      <td>负责实现酒店评价对应界面所需要的服务</td>
  </tr>
  <tr>
      <td>OneRoomService</td>
      <td>负责实现单个房间所需要的服务</td>
  </tr>
</table>

#### 5.3.2 接口规范

<table style="text-align: center;">
  <tr>
      <td colspan="3" style="font-weight: bold;">AdminService模块的接口规范</td>
  </tr>
  <tr>
      <td colspan="3" style="font-weight: bold;">提供的服务（供接口）</td>
  </tr>
  <tr>
      <td rowspan="3">addManager</td>
      <td>语法</td>
      <td>public ResponseVO addHotelManager(UserForm userForm)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加酒店管理人员账号的信息，返回添加是否成功的结果</td>
  </tr>

  <tr>
      <td rowspan="3">addSalesman</td>
      <td>语法</td>
      <td>public ResponseVO addSalesman(UserForm userForm)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加网站营销人员账号的信息，返回添加是否成功的结果</td>
  </tr>

  <tr>
      <td rowspan="3">getAllManagers</td>
      <td>语法</td>
      <td>public List &lt;User&gt; getAllClients()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有酒店管理人员账号的信息并返回</td>
  </tr>

  <tr>
      <td rowspan="3">getAllClients</td>
      <td>语法</td>
      <td>public List &lt;User&gt; getAllClients()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有客户账号的信息并返回</td>
  </tr>

  <tr>
      <td rowspan="3">getAllSalesman</td>
      <td>语法</td>
      <td>public List &lt;User&gt; getAllSalesman()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有网站营销人员账号的信息并返回</td>
  </tr>

  <tr>
      <td rowspan="3">deleteUser</td>
      <td>语法</td>
      <td>public ResponseVO deleteUser(int userId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>用户对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据userId删除账号</td>
  </tr>

</table>
<br/>

<table style="text-align: center;">
  <tr>
      <td colspan="3" style="font-weight: bold;">CreditService模块的接口规范</td>
  </tr>
  <tr>
      <td colspan="3" style="font-weight: bold;">提供的服务（供接口）</td>
  </tr>
  <tr>
      <td rowspan="3">getUserCredit</td>
      <td>语法</td>
      <td>public List &lt; CreditVO &gt; getUserCredit(int userId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>客户对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据userId获取所有信用对象</td>
  </tr>

  <tr>
      <td rowspan="3">updateCredit</td>
      <td>语法</td>
      <td>public void updateCredit(int userId,String action,double change,double current)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>信用对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加信用对象的信息</td>
  </tr>

</table>
</br>

<table style="text-align: center;">
  <tr>
      <td colspan="3" style="font-weight: bold;">EvaluationService模块的接口规范</td>
  </tr>
  <tr>
      <td colspan="3" style="font-weight: bold;">提供的服务（供接口）</td>
  </tr>
  <tr>
      <td rowspan="3">addEvaluation</td>
      <td>语法</td>
      <td>public ResponseVO addEvaluation(EvaluationVO evaluationVO)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加酒店评价对象</td>
  </tr>

  <tr>
      <td rowspan="3">retrieveHotelEvaluationInfo</td>
      <td>语法</td>
      <td>public List &lt; Evaluation &gt; retrieveHotelEvaluationInfo(Integer hotelId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据hotelId获取对应酒店的所有酒店评价对象</td>
  </tr>

</table>
</br>


<table style="text-align: center;">
  <tr>
      <td colspan="3" style="font-weight: bold;">SalesmanService模块的接口规范</td>
  </tr>
  <tr>
      <td colspan="3" style="font-weight: bold;">提供的服务（供接口）</td>
  </tr>
  <tr>
      <td rowspan="3">getAllUser</td>
      <td>语法</td>
      <td>public List &lt; User &gt; getAllUser()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有客户对象</td>
  </tr>

  <tr>
      <td rowspan="3">recharge</td>
      <td>语法</td>
      <td>public ResponseVO recharge(RechargeUser rechargeUser)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>客户对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>客户信用充值</td>
  </tr>
</table>
</br>

<table style="text-align: center;">
  <tr>
      <td colspan="3" style="font-weight: bold;">CouponService模块的接口规范</td>
  </tr>
  <tr>
      <td colspan="3" style="font-weight: bold;">提供的服务（供接口）</td>
  </tr>
  <tr>
      <td rowspan="3">getMatchOrderCoupon</td>
      <td>语法</td>
      <td>List &lt;Coupon&gt; getMatchOrderCoupon(OrderVO orderVO)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店已录入优惠策略</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>返回该订单可用的优惠策略列表</td>
  </tr>
  <tr>
      <td rowspan="3">getHotelAllCoupon</td>
      <td>语法</td>
      <td>public List &lt;Coupon&gt; getHotelAllCoupon(Integer hotelId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>客户进入系统</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>查看该酒店所有的优惠策略（包括失效的），返回优惠策略列表</td>
  </tr>

  <tr>
      <td rowspan="3">addHotelTargetRoomCoupon</td>
      <td>语法</td>
      <td>public CouponVO addHotelTargetRoomCoupon(HotelTargetRoomCouponVO couponVO)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店已录入系统</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加预订三间及以上优惠策略</td>
  </tr>

  <tr>
      <td rowspan="3">addBirthCoupon</td>
      <td>语法</td>
      <td>public CouponVO addHotelBirthCoupon(BirthCouponVO couponVO)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店已录入系统</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加生日优惠策略</td>
  </tr>

  <tr>
      <td rowspan="3">addTimeCoupon</td>
      <td>语法</td>
      <td>public CouponVO addTimeCoupon(TimeCouponVO couponVO)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店已录入系统</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加限时优惠策略</td>
  </tr>


  <tr>
      <td rowspan="3">addMutipleCoupon</td>
      <td>语法</td>
      <td>public CouponVO addMultipleCoupon(MultipleCouponVO couponVO)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店已录入系统</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加多间优惠策略</td>
  </tr>

  <tr>
      <td rowspan="3">getTargetMoneyCouponList</td>
      <td>语法</td>
      <td>public List &lt;Coupon&gt; getTargetMoneyCoupon()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店已录入系统</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取满减优惠策略</td>
  </tr>

  <tr>
      <td rowspan="3">getTimeCouponList</td>
      <td>语法</td>
      <td>public List &lt;Coupon&gt; getTimeCouponList()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店已录入系统</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取限时优惠策略</td>
  </tr>

  <tr>
      <td rowspan="3">getMutipleCouponList</td>
      <td>语法</td>
      <td>public List &lt;Coupon&gt; getMutipleCouponList()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店已录入系统</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取多间优惠策略</td>
  </tr>

  <tr>
      <td rowspan="3">getBirthCouponList</td>
      <td>语法</td>
      <td>public List &lt;Coupon&gt; getBirthCouponList()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店已录入系统</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取会员生日优惠策略</td>
  </tr>


</table>


<table style="text-align: center;">
  <tr>
      <td colspan="3" style="font-weight: bold;">HotelService模块的接口规范</td>
  </tr>
  <tr>
      <td colspan="3" style="font-weight: bold;">提供的服务（供接口）</td>
  </tr>
  <tr>
      <td rowspan="3">addHotel</td>
      <td>语法</td>
      <td>public void addHotel(HotelVO hotelVO) throws ServiceException</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加酒店</td>
  </tr>
  

  <tr>
      <td rowspan="3">retrieveHotels</td>
      <td>语法</td>
      <td>public List &lt;HotelVO&gt; retrieveHotels()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有酒店对象</td>
  </tr>

  <tr>
      <td rowspan="3">retriveHotelDetails</td>
      <td>语法</td>
      <td>public HotelVO retrieveHotelDetails(Integer hotelId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据hotelId获取单个酒店对象</td>
  </tr>

  <tr>
      <td rowspan="3">searchHotels</td>
      <td>语法</td>
      <td>public List &lt; HotelVO &gt; searchHotels(String address, String hotelName, String bizRegion, Integer  lowStar, Integer highStar, Integer rooms, Integer roomType, Double lowPrice,Double highPrice,String InDate, String OutDate)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据条件获取对应的所有酒店对象</td>
  </tr>

  <tr>
      <td rowspan="3">getHotelByCondition</td>
      <td>语法</td>
      <td>public List &lt; HotelVO &gt; retrieveHotelDetails(String bizRegion,String address,boolean ordered,int userId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据条件获取对应的所有酒店对象</td>
  </tr>

  <tr>
      <td rowspan="3">sortByEvaluationPeople</td>
      <td>语法</td>
      <td>public List &lt; HotelVO &gt; sortByEvaluationPeople(List &lt; HotelVO &gt;)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>将所有酒店对象按评价人数降序排序</td>
  </tr>  


  <tr>
      <td rowspan="3">sortByStar</td>
      <td>语法</td>
      <td>public List &lt; HotelVO &gt; sortByStar(List &lt; HotelVO &gt;)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>将所有酒店对象按星级降序排序</td>
  </tr> 

  <tr>
      <td rowspan="3">sortByScore</td>
      <td>语法</td>
      <td>public List &lt; HotelVO &gt; sortByScore(List &lt; HotelVO &gt;)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>将所有酒店对象按评分降序排序</td>
  </tr> 

  <tr>
      <td rowspan="3">deleteHotel</td>
      <td>语法</td>
      <td>public void deleteHotel(int hotelId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据hotelId删除酒店对象</td>
  </tr> 

  <tr>
      <td rowspan="3">getHotelListByManagerId</td>
      <td>语法</td>
      <td>public List &lt; HotelVO &gt; getHotelListByManagerId(int managerId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店工作人员对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据managerId获取管理的所有酒店对象</td>
  </tr> 
</table>
</br>

<table style="text-align: center;">
  <tr>
      <td colspan="3" style="font-weight: bold;">RoomService模块的接口规范</td>
  </tr>
  <tr>
      <td colspan="3" style="font-weight: bold;">提供的服务（供接口）</td>
  </tr>
  
  <tr>
      <td rowspan="3">retrieveHotelRoomInfo</td>
      <td>语法</td>
      <td>public List &lt; HotelRoom &gt; retrieveHotelRoomInfo(int hotelId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据hotelId获取酒店的所有房间对象</td>
  </tr> 

  <tr>
      <td rowspan="3">insertRoomInfo</td>
      <td>语法</td>
      <td>public void insertRoomInfo(HotelRoom hotelRoom)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加房间对象</td>
  </tr> 

  <tr>
      <td rowspan="3">updateRestRooms</td>
      <td>语法</td>
      <td>public List &lt; HotelRoom &gt; updateRestRooms(int hotelId,String checkInDate,String checkOutDate)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>房间对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>更新房间对象的信息</td>
  </tr> 

  <tr>
      <td rowspan="3">checkIsConflicted</td>
      <td>语法</td>
      <td>public boolean checkIsConflicted(String checkInStr, String checkOutStr, OneRoom oneRoom)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>房间对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>判断房间日期是否与现有的产生冲突</td>
  </tr>  

</table>


<br/>

<table style="text-align: center;">
  <tr>
      <td colspan="3" style="font-weight: bold;">OrderService模块的接口规范</td>
  </tr>
  <tr>
      <td colspan="3" style="font-weight: bold;">提供的服务（供接口）</td>
  </tr>
  <tr>
      <td rowspan="3">addOrder</td>
      <td>语法</td>
      <td>public ResponseVO addOrder(OrderVO orderVO)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>用户进入预订界面</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加订单</td>
  </tr>
  <tr>
      <td rowspan="3">getAllOrders</td>
      <td>语法</td>
      <td>public List &lt;Order&gt; getAllOrders()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店工作人员进入系统</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取该酒店的所有订单信息并返回</td>
  </tr>

  <tr>
      <td rowspan="3">getUserOrders</td>
      <td>语法</td>
      <td>public List &lt;Order&gt; getUserOrders(int userid)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>用户登录系统</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据用户id获取所有订单信息并返回</td>
  </tr>

  <tr>
      <td rowspan="3">annulOrder</td>
      <td>语法</td>
      <td>public ResponseVO annulOrder(int orderid)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>用户已经预订了某酒店</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>撤销该订单</td>
  </tr>

  <tr>
      <td rowspan="3">getHotelOrders</td>
      <td>语法</td>
      <td>public List &lt; Order &gt; getHotelOrders(int hotelId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取对应酒店的所有订单对象</td>
  </tr>

  <tr>
      <td rowspan="3">getManagedOrders</td>
      <td>语法</td>
      <td>public List &lt; Order &gt; getManagedOrders(int managerId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店工作人员对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取管理的所有订单对象</td>
  </tr>

  <tr>
      <td rowspan="3">executeOrder</td>
      <td>语法</td>
      <td>public ResponseVO executeOrder(int orderId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>订单对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>执行订单</td>
  </tr>

  <tr>
      <td rowspan="3">updateOverTimeOrders</td>
      <td>语法</td>
      <td>public List &lt; Order &gt; updateOverTimeOrders(int userId,String type)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>订单对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>判断订单是否发生异常</td>
  </tr>

  <tr>
      <td rowspan="3">checkOutOrder</td>
      <td>语法</td>
      <td>public ResponseVO checkOutOrder(int orderId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>订单对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>退房</td>
  </tr>

  
</table>
<br/>

<table style="text-align: center;">
  <tr>
      <td colspan="3" style="font-weight: bold;">UserService模块的接口规范</td>
  </tr>
  <tr>
      <td colspan="3" style="font-weight: bold;">提供的服务（供接口）</td>
  </tr>
  <tr>
      <td rowspan="3">registerAccount</td>
      <td>语法</td>
      <td>public ResponseVO registerAccount(UserVO userVO)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>用户注册账号并返回是否成功</td>
  </tr>

  <tr>
      <td rowspan="3">login</td>
      <td>语法</td>
      <td>public User login(UserForm userForm)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>用户登录并返回是否成功</td>
  </tr>

  <tr>
      <td rowspan="3">getUserInfo</td>
      <td>语法</td>
      <td>public User getUserInfo(int id)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>用户已注册</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取并返回用户个人信息</td>
  </tr>

  <tr>
      <td rowspan="3">updateUserInfo</td>
      <td>语法</td>
      <td>public ResponseVO updateUserInfo(int id, String password, String username, String phonenumber)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>用户已注册</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>用户更改个人信息并返回是否成功</td>
  </tr>


  <tr>
      <td rowspan="3">beMember</td>
      <td>语法</td>
      <td>public ResponseVO beMember(int id, String memberType, String birthday, String companyName)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>用户已注册普通账号</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>升级成为会员</td>
  </tr>
</table>

<table style="text-align: center;">
  <tr>
      <td colspan="3" style="font-weight: bold;">OneRoomService模块的接口规范</td>
  </tr>
  <tr>
      <td colspan="3" style="font-weight: bold;">提供的服务（供接口）</td>
  </tr>
  <tr>
      <td rowspan="3">distributeRooms</td>
      <td>语法</td>
      <td>public ResponseVO distributeRooms(OrderVO orderVO)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>订单对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>分配房间号并添加单个房间的对象</td>
  </tr>

  <tr>
      <td rowspan="3">checkOutRooms</td>
      <td>语法</td>
      <td>public void checkOutRooms(int orderId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>订单对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>删除订单对应的所有单个房间对象</td>
  </tr>

  <tr>
      <td rowspan="3">getDistributedRooms</td>
      <td>语法</td>
      <td>public List &lt; Integer &gt; getDistributedRooms(int orderId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>订单对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取分配的房间号</td>
  </tr>

  <tr>
      <td rowspan="3">getAllRooms</td>
      <td>语法</td>
      <td>public List &lt; OneRoom &gt; getAllRooms()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有单个房间对象</td>
  </tr>

</table>
</br>

### 5.4 数据层分解
数据层主要给业务逻辑层提供数据访问服务，包括对可持久化对象的增删改查
![icon](https://orzorzorzorz.oss-cn-beijing.aliyuncs.com/%E8%BD%AF%E5%B7%A5%E4%BA%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E6%96%87%E6%A1%A3%E4%BD%9C%E4%B8%9A/%E6%95%B0%E6%8D%AE%E5%B1%82/%E6%95%B0%E6%8D%AE%E5%B1%82%E6%A8%A1%E5%9D%97%E5%9B%BE.png)
#### 5.4.1 职责
<table style="text-align: center;">
  <tr>
      <td colspan="3" style="font-weight: bold;">数据层模块的职责</td>
  </tr>
  <tr style="font-weight: bold;">
      <td>模块</td>
      <td colspan="2">职责</td>
  </tr>

  <tr>
      <td>AdminMapper</td>
      <td colspan="2">
          User数据库Admin模块的接口
      </td>
  </tr>

  <tr>
      <td>SalesmanMapper</td>
      <td colspan="2">
          User数据库Salesman模块的接口
      </td>
  </tr>

  <tr>
      <td>EvaluationMapper</td>
      <td colspan="2">
          Evaluation数据库的接口
      </td>
  </tr>

  <tr>
      <td>CouponMapper</td>
      <td colspan="2">
          Coupon数据库的接口
      </td>
  </tr>
  <tr>
      <td>HotelMapper</td>
      <td colspan="2">
          Hotel数据库的接口
      </td>
  </tr>
  <tr>
      <td>AccountMapper</td>
      <td colspan="2">
          User数据库的接口
      </td>
  </tr>
  <tr>
      <td>OrderMapper</td>
      <td colspan="2">
            Order数据库的接口
      </td>
  </tr>
  <tr>
      <td>RoomMapper</td>
      <td colspan="2">
          Room数据库的接口
      </td>
  </tr>
  <tr>
      <td>OneRoomMapper</td>
      <td colspan="2">
          OneRoom数据库的接口
      </td>
  </tr>
</table>

#### 5.4.2 接口规范
<table style="text-align: center;">
  <tr>
      <td colspan="3" style="font-weight: bold;">数据层模块的接口规范</td>
  </tr>
  <tr>
      <td colspan="3" style="font-weight: bold;">提供的服务（供接口）</td>
  </tr>

  <tr>
      <td rowspan="3">AdminMapper.addManager</td>
      <td>语法</td>
      <td>public int addHotelManager(User user)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加酒店管理人员账号并返回是否成功</td>
  </tr>

  <tr>
      <td rowspan="3">AdminMapper.getAllHotelManagers</td>
      <td>语法</td>
      <td>public List &lt;User&gt; getAllHotelManagers()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>查找所有酒店管理人员账号并返回</td>
  </tr>

  <tr>
      <td rowspan="3">AdminMapper.getAllClients</td>
      <td>语法</td>
      <td>public List &lt;User&gt; getAllClients()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>查找所有客户账号并返回</td>
  </tr>

  <tr>
      <td rowspan="3">AdminMapper.getAllSalesman</td>
      <td>语法</td>
      <td>public List &lt;User&gt; getAllSalesman()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>查找所有网站营销人员账号并返回</td>
  </tr>

  <tr>
      <td rowspan="3">AdminMapper.deleteUser</td>
      <td>语法</td>
      <td>public void deleteUser(Integer userId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>该账号已存在</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据ID删除该账号</td>
  </tr>

  <tr>
      <td rowspan="3">SalesmanMapper.getAllUser</td>
      <td>语法</td>
      <td>public List &lt;User&gt; getAllUser()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有存在的账号</td>
  </tr>



  <tr>
      <td rowspan="3">CouponMapper.insertCoupon</td>
      <td>语法</td>
      <td>public int insertCoupon(Coupon coupon)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加优惠策略并返回是否成功</td>
  </tr>

  <tr>
      <td rowspan="3">CouponMapper.selectTargetMoneyCoupon</td>
      <td>语法</td>
      <td>public List &lt; Coupon &gt; selectTargetMoneyCoupon()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有满减优惠对象</td>
  </tr>

  <tr>
      <td rowspan="3">CouponMapper.selectTimeCoupon</td>
      <td>语法</td>
      <td>public List &lt; Coupon &gt; selectTimeCoupon()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有限时优惠对象</td>
  </tr>

  <tr>
      <td rowspan="3">CouponMapper.selectMultipleCoupon</td>
      <td>语法</td>
      <td>public List &lt; Coupon &gt; selectMultipleCoupon()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有多间优惠对象</td>
  </tr>

  <tr>
      <td rowspan="3">CouponMapper.selectBirthCoupon</td>
      <td>语法</td>
      <td>public List &lt; Coupon &gt; selectBirthCoupon()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有会员生日优惠对象</td>
  </tr>

  <tr>
      <td rowspan="3">CouponMapper.selectByHotelId</td>
      <td>语法</td>
      <td>public List &lt;Coupon&gt; selectByHotelId(Integer hotelId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>查找该酒店的所有优惠策略并返回</td>
  </tr>

  <tr>
      <td rowspan="3">CouponMapper.deleteByHotelId</td>
      <td>语法</td>
      <td>public void deleteByHotelId(Integer hotelId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据ID删除酒店对象</td>
  </tr>

  <tr>
      <td rowspan="3">HotelMapper.insertHotel</td>
      <td>语法</td>
      <td>public int insertHotel(Hotel hotel)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加酒店对象</td>
  </tr>

  <tr>
      <td rowspan="3">HotelMapper.selectAllHotel</td>
      <td>语法</td>
      <td>public List &lt;HotelVO&gt; selectAllHotel()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有酒店对象</td>
  </tr>


  <tr>
      <td rowspan="3">HotelMapper.selectById</td>
      <td>语法</td>
      <td>public HotelVO selectById(int id)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取ID对应的酒店对象</td>
  </tr>

  <tr>
      <td rowspan="3">HotelMapper.deleteById</td>
      <td>语法</td>
      <td>public void deleteById(int id)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据ID删除酒店对象</td>
  </tr>

  <tr>
      <td rowspan="3">HotelMapper.selectOrderedHotel</td>
      <td>语法</td>
      <td>public List &lt; HotelVO &gt; selectOrderedHotel(int userId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>客户对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据userID获取预订过的酒店对象</td>
  </tr>

  <tr>
      <td rowspan="3">HotelMapper.selectManagedHotel</td>
      <td>语法</td>
      <td>public List &lt; HotelVO &gt; selectManagedHotel(int managerId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>管理员对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据managerId获取管理的酒店对象</td>
  </tr>

  <tr>
      <td rowspan="3">HotelMapper.updateRate</td>
      <td>语法</td>
      <td>public int updateRate(int id,int evaluatePeople,double rate)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据ID更新酒店评价人数和评分</td>
  </tr>

  <tr>
      <td rowspan="3">RoomMapper.insertRoom</td>
      <td>语法</td>
      <td>public int insertRoom(HotelRoom hotelRoom)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加房间对象</td>
  </tr>

  <tr>
      <td rowspan="3">RoomMapper.selectRoomsByHotelId</td>
      <td>语法</td>
      <td>public List &lt;HotelRoom&gt; selectRoomsByHotelId(int hotelId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据ID获取单个酒店的所有房间对象</td>
  </tr>

  <tr>
      <td rowspan="3">RoomMapper.updateRoomInfo</td>
      <td>语法</td>
      <td>public int updateRoomInfo(int hotelId,String roomType,int rest)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>房间对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>更新总房间对象信息</td>
  </tr>

  <tr>
      <td rowspan="3">RoomMapper.selectSpecificRooms</td>
      <td>语法</td>
      <td>public HotelRoom selectSpecificRooms(int hotelId,String roomType)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据roomType和hotelId获取单一酒店的房间对象</td>
  </tr>

  <tr>
      <td rowspan="3">OrderMapper.addOrder</td>
      <td>语法</td>
      <td>public int addOrder(Order order)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象以及房间对象已经存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加订单对象</td>
  </tr>
  <tr>
      <td rowspan="3">OrderMapper.getAllOrders</td>
      <td>语法</td>
      <td>public List &lt;Order&gt; getAllOrders()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象以及房间对象已经存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有订单对象</td>
  </tr>
  <tr>
      <td rowspan="3">OrderMapper.getUserOrders</td>
      <td>语法</td>
      <td>public List &lt;Order&gt; getUserOrders(int userId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象、房间对象、客户对象已经存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取该客户的所有订单对象</td>
  </tr>
  <tr>
      <td rowspan="3">OrderMapper.getOrderById</td>
      <td>语法</td>
      <td>public Order getOrderById(int orderid)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>订单对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据ID获取单一订单对象</td>
  </tr>
  <tr>
      <td rowspan="3">OrderMapper.annualOrder</td>
      <td>语法</td>
      <td>public int annulOrder(int orderId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>订单对象已经存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>删除订单对象</td>
  </tr>

  <tr>
      <td rowspan="3">OrderMapper.getManagedOrders</td>
      <td>语法</td>
      <td>public List &lt; Order &gt; getManagedOrders(int managerId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店工作人员对象已经存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所管理酒店的所有订单对象</td>
  </tr>

  <tr>
      <td rowspan="3">OrderMapper.updateOrderState</td>
      <td>语法</td>
      <td>public int updateOrderState(int orderId,String orderState)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>订单对象已经存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>更新订单对象的状态</td>
  </tr>

  <tr>
      <td rowspan="3">AccountMapper.createNewAccount</td>
      <td>语法</td>
      <td>public int createNewAccount(User user)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加客户对象</td>
  </tr>
  <tr>
      <td rowspan="3">AccountMapper.getAccountByName</td>
      <td>语法</td>
      <td>public User getAccountByName(String email)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>客户对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据邮箱获取账户对象</td>
  </tr>
  <tr>
      <td rowspan="3">AccountMapper.updateAccount</td>
      <td>语法</td>
      <td>public int updateAccount(int id,String password,String username,String phonenumber)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>客户对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>更新客户对象的信息</td>
  </tr>
  <tr>
      <td rowspan="3">AccountMapper.beMember</td>
      <td>语法</td>
      <td>public int beMember(int id,String memberType,String birthday,String companyName)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>客户对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>更新客户对象的会员状态</td>
  </tr>

  <tr>
      <td rowspan="3">AccountMapper.updateCredit</td>
      <td>语法</td>
      <td>public int updateCredit(int id,double credit)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>客户对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>更新客户对象的信用</td>
  </tr>

  <tr>
      <td rowspan="3">CreditMapper.updateCredit</td>
      <td>语法</td>
      <td>public int updateCredit(Credit credit)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加信用对象</td>
  </tr>

  <tr>
      <td rowspan="3">CreditMapper.getUserCredit</td>
      <td>语法</td>
      <td>public List &lt; Credit &gt; getUserCredit(int userId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>客户对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据userId获取所有信用对象</td>
  </tr>

  <tr>
      <td rowspan="3">EvaluationMapper.addEvaluation</td>
      <td>语法</td>
      <td>public int addEvaluation(Evaluation evaluation)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加酒店评价对象</td>
  </tr>

  <tr>
      <td rowspan="3">EvaluationMapper.selectEvaluationsByHotelId</td>
      <td>语法</td>
      <td>public List &lt; Evaluation &gt;  selectEvaluationsByHotelId(int hotelId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据hotelId获取所有酒店评价对象</td>
  </tr>

  <tr>
      <td rowspan="3">OneRoomMapper.selectRoomsByOrderId</td>
      <td>语法</td>
      <td>public List &lt; Integer &gt;  selectRoomsByOrderId(int orderId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>订单对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>根据orderId获取所有对应的房间号</td>
  </tr>

  <tr>
      <td rowspan="3">OneRoomMapper.selectRoomInfoByRoomId</td>
      <td>语法</td>
      <td>public List &lt; OneRoom &gt;  selectRoomInfoByRoomId(int roomId,int hotelId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象和单个房间对象已存在于数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有对应的单个房间对象</td>
  </tr>

  <tr>
      <td rowspan="3">OneRoomMapper.insertRoomInfo</td>
      <td>语法</td>
      <td>public void insertRoomInfo(OneRoom oneRoom)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>添加单个房间对象</td>
  </tr>

  <tr>
      <td rowspan="3">OneRoomMapper.deleteRoomInfo</td>
      <td>语法</td>
      <td>public void deleteRoomInfo(int orderId)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>订单对象已存在数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>删除对应的所有单个房间对象</td>
  </tr>

  <tr>
      <td rowspan="3">OneRoomMapper.getUsingRooms</td>
      <td>语法</td>
      <td>public List &lt; OneRoom &gt; getUsingRooms(int hotelId,String roomType)</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>酒店对象已存在数据库中</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取对应酒店和房间类型下使用的所有单个房间对象</td>
  </tr>

  <tr>
      <td rowspan="3">OneRoomMapper.getAllRooms</td>
      <td>语法</td>
      <td>public List &lt; OneRoom &gt; getAllRooms()</td>
  </tr>
  <tr>
      <td>前置条件</td>
      <td>无</td>
  </tr>
  <tr>
      <td>后置条件</td>
      <td>获取所有单个房间对象</td>
  </tr>
  

</table>


## 6 信息视角

### 6.1 持久化对象
系统的PO类是对应的相关的实体类

持久化对象的定义如下图所示

#### User实体定义

```java
public class User{
	private Integer id;
    private String email;
    private String password;
    private String userName;
    private String phoneNumber;
    private double credit;
    private UserType userType;
    // 会员等级，分三类非会员，普通会员，企业会员
    private String memberType;
    private String birthday; // 生日（普通会员才有）
    private String companyName;
}
```

#### Coupon实体定义

```java
public class Coupon{
	/**
     * 优惠券id
     */
    private int id;
    /**
     * 优惠券描述
     */
    private String description;

    /**
     * 如果为-1 代表是网站推出的优惠
     */
    private Integer hotelId;

    /**
     * 优惠券类型 1生日特惠 2多间特惠 3满减优惠 4限时优惠
     */
    private Integer couponType;
    /**
     * 优惠券名称
     */
    private String couponName;
    /**
     * 优惠券使用门槛
     */
    private double targetMoney;

    /**
     * 折扣
     */
    private double discount;
    /**
     * 优惠券优惠金额
     */
    private double discountMoney;
    /**
     * 可用时间
     */
    private LocalDateTime startTime;
    /**
     * 失效时间
     */
    private LocalDateTime endTime;

    /**
     * 优惠券状态 是否已经失效 1可用 0失效
     */
    private Integer status;
    /**
     * 多间优惠门槛
     */
    private Integer targetRoomNum;
}
```

#### HotelPo实体定义

```java
public class Hotel{
	private Integer id;
    private String hotelName;
    private String address;
    /**
     * 商圈
     */
    private BizRegion bizRegion;
    private HotelStar hotelStar;
    private Double rate;
    private int evaluatePeople=1;//评价人数，预设为1
    private String description;
    private String phoneNum;
    /**
     * 酒店管理员id
     */
    private Integer managerId;
}
```

#### HotelRoom实体定义

```java
public class HotelRoom{
	private Integer id;
    private RoomType roomType;
    private Integer hotelId;
    private double price;
    private int rest;//剩余可预订数量
    /**
     * 某类型房间总数
     */
    private int total;
}
```

#### Order实体定义

```java
public class Order{
	private Integer id;
    private Integer userId;
    private Integer hotelId;
    private String hotelName;
    private String checkInDate;
    private String checkOutDate;
    private String roomType;
    private Integer roomNum;
    private Integer peopleNum;
    private boolean haveChild;
    private String createDate;
    private Double price;
    private String clientName;
    private String phoneNumber;
    private String orderState;
    private String orderCancelDate;
    private String latestTime;//最晚执行时间
}
```

#### Credit实体定义

```java
public class Credit {
    private Integer id;
    private Integer userId;
    private String action;//操作
    private double change;//信用变化
    private double current;//变化后的当前值
    private LocalDateTime time;//变化时间
}
```

#### Evaluation实体定义

```java
public class Evaluation {
    private Integer id;
    private Integer userId;
    private Integer hotelId;
    private Integer rate;//评分
    private String evaluation;//评价
}
```

#### OneRoom实体定义

```java
public class OneRoom {
    private int id;
    private int orderId;
    private int roomId;//房间号
    private int hotelId;
    private LocalDateTime checkInDate;//入住时间
    private LocalDateTime checkOutDate;//退房时间
    private String roomType;//房间类型
}
```



### 6.2 数据库表

数据库中包含User表、Hotel表、Room表、Coupon表、Order表、Credit表、Oneroom表、Evaluation表